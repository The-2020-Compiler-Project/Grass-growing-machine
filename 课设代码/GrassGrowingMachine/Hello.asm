_SSEG	SEGMENT STACK
_STK	DW 255 DUP(0)
_SSEG	ENDS
_DSEG	SEGMENT
_VARS	DB 38 DUP(0)
_DSEG	ENDS
_CSEG	SEGMENT
	ASSUME CS:_CSEG, DS:_DSEG, SS:_SSEG
f1	PROC FAR
	SUB SP, 2
	MOV AX, [BP - 6]
	MOV DX, 2
	IMUL DX
	MOV BX, 12
	MOV [BX], AX
	MOV [BP - 18], AX
	SUB AX, 0
	LAHF
	MOV BX, AX
	AND AX, 8000H
	ROL AX, 1
	AND BX, 4000H
	ROL BX, 1
	ROL BX, 1
	OR AX, BX
	MOV BX, 14
	MOV [BX], AX
_IF0:	TEST AX, AX
	JZ _EL0
	MOV AX, 0
	MOV [BP - 2], AX
	LEA SP, [BP - 16]
	MOV BP, [BP - 4]
	RET 10
	JMP _IE0
_EL0:	NOP
	MOV AX, [BP - 6]
	ADD AX, 2
	MOV BX, 16
	MOV [BX], AX
	MOV [BP - 18], AX
	MOV AX, 5
	MOV BX, [BP - 10]
	MOV ES, BX
	MOV BX, [BP - 10 - 02H]
	MOV ES:[BX], AX
	MOV AX, [BP - 18]
	ADD AX, 2
	MOV BX, 18
	MOV [BX], AX
	MOV [BP - 2], AX
	LEA SP, [BP - 16]
	MOV BP, [BP - 4]
	RET 10
_IE0:	NOP
	MOV AX, 1
	MOV [BP - 2], AX
	LEA SP, [BP - 16]
	MOV BP, [BP - 4]
	RET 10
f1	ENDP
f2	PROC FAR
	SUB SP, 2
	MOV AX, [BP - 6]
	MOV DX, 2
	IMUL DX
	MOV BX, 20
	MOV [BX], AX
	MOV [BP - 18], AX
	SUB AX, 0
	LAHF
	MOV BX, AX
	AND AX, 8000H
	ROL AX, 1
	AND BX, 4000H
	ROL BX, 1
	ROL BX, 1
	OR AX, BX
	MOV BX, 22
	MOV [BX], AX
_IF1:	TEST AX, AX
	JZ _EL1
	MOV AX, 0
	MOV [BP - 2], AX
	LEA SP, [BP - 16]
	MOV BP, [BP - 4]
	RET 10
	JMP _IE1
_EL1:	NOP
	MOV AX, [BP - 6]
	ADD AX, 2
	MOV BX, 24
	MOV [BX], AX
	MOV [BP - 18], AX
	MOV AX, 5
	MOV BX, [BP - 10]
	MOV ES, BX
	MOV BX, [BP - 10 - 02H]
	MOV ES:[BX], AX
	MOV AX, [BP - 18]
	ADD AX, 2
	MOV BX, 26
	MOV [BX], AX
	MOV [BP - 2], AX
	LEA SP, [BP - 16]
	MOV BP, [BP - 4]
	RET 10
_IE1:	NOP
	MOV AX, 1
	MOV [BP - 2], AX
	LEA SP, [BP - 16]
	MOV BP, [BP - 4]
	RET 10
f2	ENDP
_ENTRY:	MOV AX, _DSEG
	MOV DS, AX
	MOV AX, _SSEG
	MOV SS, AX
	MOV SP, SIZE _STK
	MOV BP, SIZE _STK
	MOV AX, 1
	MOV BX, 0
	MOV [BX], AX
	MOV AX, 2
	MOV BX, 2
	MOV [BX], AX
	MOV AX, 3
	MOV BX, 4
	MOV [BX], AX
	MOV AX, DS:[0]
	ADD AX, DS:[2]
	MOV BX, 28
	MOV [BX], AX
	MOV SI, SP
	LEA SP, [SI - 12]
	MOV BX, 0
	MOV [BX], AX
	MOV SS:[SI - 6], AX
	MOV AX, DS:[2]
	ADD AX, 1
	MOV BX, 30
	MOV [BX], AX
	MOV SS:[SI - 8], AX
	MOV AX, DS
	MOV SS:[SI - 10], AX
	MOV BX, 4
	LEA AX, [BX]
	MOV SS:[SI - 10 - 02H], AX
	MOV SS:[SI-4], BP
	MOV BP, SI
	CALL FAR PTR f1
	POP AX
	MOV DS:[32], AX
	MOV AX, DS:[32]
	MOV BX, 0
	MOV [BX], AX
	ADD AX, 48
	MOV BX, 34
	MOV [BX], AX
	MOV DL, AL
	MOV AH, 02H
	INT 21H
	MOV AX, DS:[4]
	ADD AX, 48
	MOV BX, 36
	MOV [BX], AX
	MOV DL, AL
	MOV AH, 02H
	INT 21H
	MOV AX, 4C00H
	INT 21H
_CSEG	ENDS
	END _ENTRY